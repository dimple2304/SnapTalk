const registerDialog = document.querySelector("#register-dialog");
const createacBtn = document.querySelector("#createac-btn");
const signupModalClose = document.querySelector("#signupModal-close");
const name = document.querySelector("#name");
const nameError = document.querySelector("#nameError");
const email = document.querySelector("#email");
const emailError = document.querySelector("#emailError");
const selectMonthV = document.querySelector("#select-month");
const selectDayV = document.querySelector("#select-day");
const selectYearV = document.querySelector("#select-year");
const dateError = document.querySelector("#dateError");
const nextBtn = document.querySelector("#next-btn");

signupModalClose.addEventListener("click", () => {
    registerDialog.close();
})
createacBtn.addEventListener("click", () => {
    registerDialog.showModal();
});

function validateName() {
    const nameVal = name.value.trim();
    const validNameRegex = /^[a-zA-Z\s]+$/;
    if (!nameVal) {
        nameError.innerHTML = "Please enter your name!";
        return false;
    } else if (nameVal.length > 25) {
        nameError.innerHTML = "Name can have only 25 maximum characters.";
        return false;
    } else if (!validNameRegex.test(nameVal)) {
        nameError.innerHTML = "Name can only contain letters and spaces.";
        return false;
    } else {
        nameError.innerHTML = "";
        return true;
    }
}

function validateEmail() {
    const emailVal = email.value.trim();
    const validEmailRegex = /^[^\s@]+@[^\s@]+\.[a-zA-Z]{2,}$/;
    if (!emailVal) {
        emailError.innerHTML = "Please enter your email!";
        return false;
    } else if (!validEmailRegex.test(emailVal)) {
        emailError.innerHTML = "Please enter a valid email address.";
        return false;
    } else {
        emailError.innerHTML = "";
        return true;
    }
}

function validateDOB() {
    const monthVal = selectMonthV.value;
    const dayVal = parseInt(selectDayV.value);
    const yearVal = parseInt(selectYearV.value);

    if (!monthVal || !dayVal || !yearVal) return false;

    if (yearVal > 2009) {
        dateError.innerHTML = "Age must be greater than 16!";
        return false;
    } else {
        dateError.innerHTML = "";
        return true;
    }
}

name.addEventListener("input", () => {
    validateName();
})
email.addEventListener("input", () => {
    validateEmail();
})
selectMonthV.addEventListener("change", () => {
    validateDOB();
})
selectDayV.addEventListener("change", () => {
    validateDOB();
})
selectYearV.addEventListener("change", () => {
    validateDOB();
})

// nextBtn.addEventListener("click", () =>{
//     const nameVal = name.value.trim();
//     const emailVal = email.value.trim();
//     const hasError = false;
//     const regExpression = /^[^a-zA-Z]+$/;
//     // name validation
//     nameError.innerHTML = "";
//     emailError.innerHTML = "";
//     if(!nameVal){
//         nameError.innerHTML = "Please enter your name!"
//         hasError = true;
//     }else if(nameVal.length > 25){
//         nameError.innerHTML = "Name can have only 25 maximum characters.";
//         hasError = true;
//     }else if(nameVal.match(/\d/) || !regExpression.test(nameVal)){
//         nameError.innerHTML = "Name can have only alphabetics(like abc)";
//         hasError = true;
//     }

//     if(hasError){
//         return;
//     }
// })